{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/programs/tokenManager/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Edition,\n  Metadata,\n  MetadataData,\n  MetadataProgram,\n} from \"@metaplex-foundation/mpl-token-metadata\";\nimport type { Wallet } from \"@saberhq/solana-contrib\";\nimport { Token, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport type { AccountMeta, Connection, Transaction } from \"@solana/web3.js\";\nimport { Keypair, PublicKey } from \"@solana/web3.js\";\n\nimport type { AccountData } from \"../..\";\nimport { findAta, withFindOrInitAssociatedTokenAccount } from \"../..\";\nimport { tryGetAccount } from \"../../utils\";\nimport { getPaymentManager } from \"../paymentManager/accounts\";\nimport type { TokenManagerData } from \".\";\nimport { InvalidationType, TokenManagerKind, TokenManagerState } from \".\";\nimport { findMintManagerId, findTransferReceiptId } from \"./pda\";\n\nexport const getRemainingAccountsForKind = async (\n  mintId: PublicKey,\n  tokenManagerKind: TokenManagerKind\n): Promise<AccountMeta[]> => {\n  if (\n    tokenManagerKind === TokenManagerKind.Managed ||\n    tokenManagerKind === TokenManagerKind.Permissioned\n  ) {\n    const [mintManagerId] = await findMintManagerId(mintId);\n    return [\n      {\n        pubkey: mintManagerId,\n        isSigner: false,\n        isWritable: true,\n      },\n    ];\n  } else if (tokenManagerKind === TokenManagerKind.Edition) {\n    const editionId = await Edition.getPDA(mintId);\n    return [\n      {\n        pubkey: editionId,\n        isSigner: false,\n        isWritable: false,\n      },\n      {\n        pubkey: MetadataProgram.PUBKEY,\n        isSigner: false,\n        isWritable: false,\n      },\n    ];\n  } else {\n    return [];\n  }\n};\n\nexport const withRemainingAccountsForPayment = async (\n  transaction: Transaction,\n  connection: Connection,\n  wallet: Wallet,\n  mint: PublicKey,\n  paymentMint: PublicKey,\n  issuerId: PublicKey,\n  paymentManagerId: PublicKey,\n  options?: {\n    payer?: PublicKey;\n    receiptMint?: PublicKey | null;\n  }\n): Promise<[PublicKey, PublicKey, AccountMeta[]]> => {\n  const payer = options?.payer ?? wallet.publicKey;\n  const royaltiesRemainingAccounts =\n    await withRemainingAccountsForHandlePaymentWithRoyalties(\n      transaction,\n      connection,\n      wallet,\n      mint,\n      paymentMint,\n      [issuerId.toString()]\n    );\n  const mintMetadataId = await Metadata.getPDA(mint);\n  const paymentRemainingAccounts = [\n    {\n      pubkey: paymentMint,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: mint,\n      isSigner: false,\n      isWritable: true,\n    },\n    {\n      pubkey: mintMetadataId,\n      isSigner: false,\n      isWritable: true,\n    },\n  ];\n\n  if (options?.receiptMint) {\n    const receiptMintLargestAccount = await connection.getTokenLargestAccounts(\n      options.receiptMint\n    );\n    // get holder of receipt mint\n    const receiptTokenAccountId = receiptMintLargestAccount.value[0]?.address;\n    if (!receiptTokenAccountId) throw new Error(\"No token accounts found\");\n    const receiptMintToken = new Token(\n      connection,\n      options.receiptMint,\n      TOKEN_PROGRAM_ID,\n      Keypair.generate()\n    );\n    const receiptTokenAccount = await receiptMintToken.getAccountInfo(\n      receiptTokenAccountId\n    );\n\n    // get ATA for this mint of receipt mint holder\n    const returnTokenAccountId = receiptTokenAccount.owner.equals(\n      wallet.publicKey\n    )\n      ? await findAta(paymentMint, receiptTokenAccount.owner, true)\n      : await withFindOrInitAssociatedTokenAccount(\n          transaction,\n          connection,\n          paymentMint,\n          receiptTokenAccount.owner,\n          payer,\n          true\n        );\n\n    const paymentManager = await tryGetAccount(() =>\n      getPaymentManager(connection, paymentManagerId)\n    );\n    const feeCollectorTokenAccountId =\n      await withFindOrInitAssociatedTokenAccount(\n        transaction,\n        connection,\n        paymentMint,\n        paymentManager ? paymentManager.parsed.feeCollector : paymentManagerId,\n        payer,\n        true\n      );\n    return [\n      returnTokenAccountId,\n      feeCollectorTokenAccountId,\n      [\n        {\n          pubkey: receiptTokenAccountId,\n          isSigner: false,\n          isWritable: true,\n        },\n        ...paymentRemainingAccounts,\n        ...royaltiesRemainingAccounts,\n      ],\n    ];\n  } else {\n    const issuerTokenAccountId = issuerId.equals(wallet.publicKey)\n      ? await findAta(paymentMint, issuerId, true)\n      : await withFindOrInitAssociatedTokenAccount(\n          transaction,\n          connection,\n          paymentMint,\n          issuerId,\n          payer,\n          true\n        );\n    const paymentManager = await tryGetAccount(() =>\n      getPaymentManager(connection, paymentManagerId)\n    );\n    const feeCollectorTokenAccountId =\n      await withFindOrInitAssociatedTokenAccount(\n        transaction,\n        connection,\n        paymentMint,\n        paymentManager ? paymentManager.parsed.feeCollector : paymentManagerId,\n        payer,\n        true\n      );\n    return [\n      issuerTokenAccountId,\n      feeCollectorTokenAccountId,\n      [...paymentRemainingAccounts, ...royaltiesRemainingAccounts],\n    ];\n  }\n};\n\nexport const withRemainingAccountsForReturn = async (\n  transaction: Transaction,\n  connection: Connection,\n  wallet: Wallet,\n  tokenManagerData: AccountData<TokenManagerData>,\n  allowOwnerOffCurve = true\n): Promise<AccountMeta[]> => {\n  const { issuer, mint, claimApprover, invalidationType, receiptMint, state } =\n    tokenManagerData.parsed;\n  if (\n    invalidationType === InvalidationType.Vest &&\n    state === TokenManagerState.Issued\n  ) {\n    if (!claimApprover) throw \"Claim approver must be set\";\n    const claimApproverTokenAccountId =\n      await withFindOrInitAssociatedTokenAccount(\n        transaction,\n        connection,\n        mint,\n        claimApprover,\n        wallet.publicKey,\n        allowOwnerOffCurve\n      );\n    return [\n      {\n        pubkey: claimApproverTokenAccountId,\n        isSigner: false,\n        isWritable: true,\n      },\n    ];\n  } else if (\n    invalidationType === InvalidationType.Return ||\n    state === TokenManagerState.Issued\n  ) {\n    if (receiptMint) {\n      const receiptMintLargestAccount =\n        await connection.getTokenLargestAccounts(receiptMint);\n\n      // get holder of receipt mint\n      const receiptTokenAccountId = receiptMintLargestAccount.value[0]?.address;\n      if (!receiptTokenAccountId) throw new Error(\"No token accounts found\");\n      const receiptMintToken = new Token(\n        connection,\n        receiptMint,\n        TOKEN_PROGRAM_ID,\n        Keypair.generate()\n      );\n      const receiptTokenAccount = await receiptMintToken.getAccountInfo(\n        receiptTokenAccountId\n      );\n\n      // get ATA for this mint of receipt mint holder\n      const returnTokenAccountId = await withFindOrInitAssociatedTokenAccount(\n        transaction,\n        connection,\n        mint,\n        receiptTokenAccount.owner,\n        wallet.publicKey,\n        allowOwnerOffCurve\n      );\n      return [\n        {\n          pubkey: returnTokenAccountId,\n          isSigner: false,\n          isWritable: true,\n        },\n        {\n          pubkey: receiptTokenAccountId,\n          isSigner: false,\n          isWritable: true,\n        },\n      ];\n    } else {\n      const issuerTokenAccountId = await withFindOrInitAssociatedTokenAccount(\n        transaction,\n        connection,\n        mint,\n        issuer,\n        wallet.publicKey,\n        allowOwnerOffCurve\n      );\n      return [\n        {\n          pubkey: issuerTokenAccountId,\n          isSigner: false,\n          isWritable: true,\n        },\n      ];\n    }\n  } else {\n    return [];\n  }\n};\n\nexport const withRemainingAccountsForHandlePaymentWithRoyalties = async (\n  transaction: Transaction,\n  connection: Connection,\n  wallet: Wallet,\n  mint: PublicKey,\n  paymentMint: PublicKey,\n  excludeCreators?: string[]\n): Promise<AccountMeta[]> => {\n  const creatorsRemainingAccounts: AccountMeta[] = [];\n  const mintMetadataId = await Metadata.getPDA(mint);\n  const accountInfo = await connection.getAccountInfo(mintMetadataId);\n  let metaplexMintData: MetadataData | undefined;\n  try {\n    metaplexMintData = MetadataData.deserialize(\n      accountInfo?.data as Buffer\n    ) as MetadataData;\n  } catch (e) {\n    return [];\n  }\n  if (metaplexMintData.data.creators) {\n    for (const creator of metaplexMintData.data.creators) {\n      if (creator.share !== 0) {\n        const creatorAddress = new PublicKey(creator.address);\n        const creatorMintTokenAccount = excludeCreators?.includes(\n          creator.address.toString()\n        )\n          ? await findAta(paymentMint, creatorAddress, true)\n          : await withFindOrInitAssociatedTokenAccount(\n              transaction,\n              connection,\n              paymentMint,\n              creatorAddress,\n              wallet.publicKey,\n              true\n            );\n        creatorsRemainingAccounts.push({\n          pubkey: creatorMintTokenAccount,\n          isSigner: false,\n          isWritable: true,\n        });\n      }\n    }\n  }\n\n  return creatorsRemainingAccounts;\n};\n\nexport const getRemainingAccountsForTransfer = async (\n  transferAuthority: PublicKey | null,\n  tokenManagerId: PublicKey\n): Promise<AccountMeta[]> => {\n  if (transferAuthority) {\n    const [transferReceiptId] = await findTransferReceiptId(tokenManagerId);\n    return [\n      {\n        pubkey: transferReceiptId,\n        isSigner: false,\n        isWritable: true,\n      },\n    ];\n  } else {\n    return [];\n  }\n};\n"]}