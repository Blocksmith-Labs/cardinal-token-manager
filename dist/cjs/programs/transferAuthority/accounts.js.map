{"version":3,"file":"accounts.js","sourceRoot":"","sources":["../../../../src/programs/transferAuthority/accounts.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AnchorProvider,\n  BorshAccountsCoder,\n  Program,\n  utils,\n} from \"@project-serum/anchor\";\nimport { SignerWallet } from \"@saberhq/solana-contrib\";\nimport type { Connection, PublicKey } from \"@solana/web3.js\";\nimport { Keypair } from \"@solana/web3.js\";\n\nimport type { AccountData } from \"../../utils\";\nimport type {\n  ListingData,\n  MarketplaceData,\n  TRANSFER_AUTHORITY_PROGRAM,\n  TransferAuthorityData,\n  TransferData,\n} from \"./constants\";\nimport {\n  TRANSFER_AUTHORITY_ADDRESS,\n  TRANSFER_AUTHORITY_IDL,\n} from \"./constants\";\nimport {\n  findListingAddress,\n  findMarketplaceAddress,\n  findTransferAddress,\n  findTransferAuthorityAddress,\n} from \"./pda\";\n\n//////// TRANSFER AUTHORITY ////////\n\nexport const getTransferAuthority = async (\n  connection: Connection,\n  transferAuthorityId: PublicKey\n): Promise<AccountData<TransferAuthorityData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const parsed = await transferAuthorityProgram.account.transferAuthority.fetch(\n    transferAuthorityId\n  );\n  return {\n    parsed,\n    pubkey: transferAuthorityId,\n  };\n};\n\nexport const getTransferAuthorityByName = async (\n  connection: Connection,\n  name: string\n): Promise<AccountData<TransferAuthorityData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const [transferAuthorityId] = await findTransferAuthorityAddress(name);\n\n  const parsed = await transferAuthorityProgram.account.transferAuthority.fetch(\n    transferAuthorityId\n  );\n  return {\n    parsed,\n    pubkey: transferAuthorityId,\n  };\n};\n\nexport const getAllTransferAuthorities = async (\n  connection: Connection\n): Promise<AccountData<TransferAuthorityData>[]> =>\n  getAllOfType<TransferAuthorityData>(connection, \"transferAuthority\");\n\n//////// MARKETPLACE ////////\n\nexport const getMarketplace = async (\n  connection: Connection,\n  marketplaceId: PublicKey\n): Promise<AccountData<MarketplaceData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const parsed = await transferAuthorityProgram.account.marketplace.fetch(\n    marketplaceId\n  );\n  return {\n    parsed,\n    pubkey: marketplaceId,\n  };\n};\n\nexport const getMarketplaceByName = async (\n  connection: Connection,\n  name: string\n): Promise<AccountData<MarketplaceData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const [marketplaceId] = await findMarketplaceAddress(name);\n\n  const parsed = await transferAuthorityProgram.account.marketplace.fetch(\n    marketplaceId\n  );\n  return {\n    parsed,\n    pubkey: marketplaceId,\n  };\n};\n\nexport const getAllMarketplaces = async (\n  connection: Connection\n): Promise<AccountData<MarketplaceData>[]> =>\n  getAllOfType<TransferAuthorityData>(connection, \"marketplace\");\n\n//////// LISTING ////////\n\nexport const getListing = async (\n  connection: Connection,\n  mintId: PublicKey\n): Promise<AccountData<ListingData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const [listingId] = await findListingAddress(mintId);\n\n  const parsed = await transferAuthorityProgram.account.listing.fetch(\n    listingId\n  );\n  return {\n    parsed,\n    pubkey: listingId,\n  };\n};\n\nexport const getListingsForMarketplace = async (\n  connection: Connection,\n  marketplaceId: PublicKey\n): Promise<AccountData<ListingData>[]> => {\n  const programAccounts = await connection.getProgramAccounts(\n    TRANSFER_AUTHORITY_ADDRESS,\n    {\n      filters: [\n        {\n          memcmp: {\n            offset: 0,\n            bytes: utils.bytes.bs58.encode(\n              BorshAccountsCoder.accountDiscriminator(\"listing\")\n            ),\n          },\n        },\n        { memcmp: { offset: 73, bytes: marketplaceId.toBase58() } },\n      ],\n    }\n  );\n\n  const datas: AccountData<ListingData>[] = [];\n  const coder = new BorshAccountsCoder(TRANSFER_AUTHORITY_IDL);\n  programAccounts.forEach((account) => {\n    try {\n      const data: ListingData = coder.decode(\"listing\", account.account.data);\n      if (data) {\n        datas.push({\n          ...account,\n          parsed: data,\n        });\n      }\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  return datas.sort((a, b) =>\n    a.pubkey.toBase58().localeCompare(b.pubkey.toBase58())\n  );\n};\n\nexport const getListingsForIssuer = async (\n  connection: Connection,\n  issuerId: PublicKey\n): Promise<AccountData<ListingData>[]> => {\n  const programAccounts = await connection.getProgramAccounts(\n    TRANSFER_AUTHORITY_ADDRESS,\n    {\n      filters: [\n        {\n          memcmp: {\n            offset: 0,\n            bytes: utils.bytes.bs58.encode(\n              BorshAccountsCoder.accountDiscriminator(\"listing\")\n            ),\n          },\n        },\n        { memcmp: { offset: 9, bytes: issuerId.toBase58() } },\n      ],\n    }\n  );\n\n  const datas: AccountData<ListingData>[] = [];\n  const coder = new BorshAccountsCoder(TRANSFER_AUTHORITY_IDL);\n  programAccounts.forEach((account) => {\n    try {\n      const data: ListingData = coder.decode(\"listing\", account.account.data);\n      if (data) {\n        datas.push({\n          ...account,\n          parsed: data,\n        });\n      }\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  return datas.sort((a, b) =>\n    a.pubkey.toBase58().localeCompare(b.pubkey.toBase58())\n  );\n};\n\nexport const getAllListings = async (\n  connection: Connection\n): Promise<AccountData<ListingData>[]> =>\n  getAllOfType<ListingData>(connection, \"listing\");\n\n//////// Transfer ////////\n\nexport const getTransfer = async (\n  connection: Connection,\n  mintId: PublicKey\n): Promise<AccountData<TransferData>> => {\n  const provider = new AnchorProvider(\n    connection,\n    new SignerWallet(Keypair.generate()),\n    {}\n  );\n  const transferAuthorityProgram = new Program<TRANSFER_AUTHORITY_PROGRAM>(\n    TRANSFER_AUTHORITY_IDL,\n    TRANSFER_AUTHORITY_ADDRESS,\n    provider\n  );\n\n  const [transferId] = await findTransferAddress(mintId);\n  const parsed = await transferAuthorityProgram.account.transfer.fetch(\n    transferId\n  );\n  return {\n    parsed,\n    pubkey: transferId,\n  };\n};\n\nexport const getTransfersFromUser = async (\n  connection: Connection,\n  from: PublicKey\n): Promise<AccountData<TransferData>[]> => {\n  const programAccounts = await connection.getProgramAccounts(\n    TRANSFER_AUTHORITY_ADDRESS,\n    {\n      filters: [\n        {\n          memcmp: {\n            offset: 0,\n            bytes: utils.bytes.bs58.encode(\n              BorshAccountsCoder.accountDiscriminator(\"transfer\")\n            ),\n          },\n        },\n        { memcmp: { offset: 41, bytes: from.toBase58() } },\n      ],\n    }\n  );\n\n  const datas: AccountData<TransferData>[] = [];\n  const coder = new BorshAccountsCoder(TRANSFER_AUTHORITY_IDL);\n  programAccounts.forEach((account) => {\n    try {\n      const data: TransferData = coder.decode(\"transfer\", account.account.data);\n      if (data) {\n        datas.push({\n          ...account,\n          parsed: data,\n        });\n      }\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  return datas.sort((a, b) =>\n    a.pubkey.toBase58().localeCompare(b.pubkey.toBase58())\n  );\n};\n\nexport const getTransfersToUser = async (\n  connection: Connection,\n  to: PublicKey\n): Promise<AccountData<TransferData>[]> => {\n  const programAccounts = await connection.getProgramAccounts(\n    TRANSFER_AUTHORITY_ADDRESS,\n    {\n      filters: [\n        {\n          memcmp: {\n            offset: 0,\n            bytes: utils.bytes.bs58.encode(\n              BorshAccountsCoder.accountDiscriminator(\"transfer\")\n            ),\n          },\n        },\n        { memcmp: { offset: 73, bytes: to.toBase58() } },\n      ],\n    }\n  );\n\n  const datas: AccountData<TransferData>[] = [];\n  const coder = new BorshAccountsCoder(TRANSFER_AUTHORITY_IDL);\n  programAccounts.forEach((account) => {\n    try {\n      const data: TransferData = coder.decode(\"transfer\", account.account.data);\n      if (data) {\n        datas.push({\n          ...account,\n          parsed: data,\n        });\n      }\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  return datas.sort((a, b) =>\n    a.pubkey.toBase58().localeCompare(b.pubkey.toBase58())\n  );\n};\n\n//////// utils ////////\nexport const getAllOfType = async <T>(\n  connection: Connection,\n  key: string\n): Promise<AccountData<T>[]> => {\n  const programAccounts = await connection.getProgramAccounts(\n    TRANSFER_AUTHORITY_ADDRESS,\n    {\n      filters: [\n        {\n          memcmp: {\n            offset: 0,\n            bytes: utils.bytes.bs58.encode(\n              BorshAccountsCoder.accountDiscriminator(key)\n            ),\n          },\n        },\n      ],\n    }\n  );\n\n  const datas: AccountData<T>[] = [];\n  const coder = new BorshAccountsCoder(TRANSFER_AUTHORITY_IDL);\n  programAccounts.forEach((account) => {\n    try {\n      const data: T = coder.decode(key, account.account.data);\n      if (data) {\n        datas.push({\n          ...account,\n          parsed: data,\n        });\n      }\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  });\n\n  return datas.sort((a, b) =>\n    a.pubkey.toBase58().localeCompare(b.pubkey.toBase58())\n  );\n};\n"]}